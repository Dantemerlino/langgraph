<article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Data Lake</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Longitudinal Patient Record</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">LPR (FHIR) Data</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">FHIR Schema and Specs</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CommonMapping</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CommonMapping</h1></header><p>Mappings for common FHIR datatypes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="characteristics">Characteristics<a href="#characteristics" class="hash-link" aria-label="Direct link to Characteristics" title="Direct link to Characteristics">​</a></h2>
<table><thead><tr><th>Attribute</th><th>Value</th></tr></thead><tbody><tr><td>FHIR Version</td><td><a href="https://www.hl7.org/fhir/r4/datatypes.html" target="_blank" rel="noopener noreferrer">R4 (4.0.1)</a></td></tr><tr><td>US Core Profile Id</td><td><a href="http://hl7.org/fhir/us/core/STU4/general-guidance.html" target="_blank" rel="noopener noreferrer">NA</a></td></tr><tr><td>Source System</td><td>Epic</td></tr><tr><td>Source Format</td><td>HL7v2</td></tr><tr><td>Epic Bridge ID</td><td>See main resource specification</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h2>
<ul>
<li>This is a "pseudo-specification" is used to capture common / re-usable mapping patterns and is not a<br>FHIR Resource. This pseudo-specification may be referenced by actual FHIR Resource mapping specifications<br>to improve consistency and re-use.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-attributes">Supported Attributes<a href="#supported-attributes" class="hash-link" aria-label="Direct link to Supported Attributes" title="Direct link to Supported Attributes">​</a></h2>
<table><thead><tr><th>Attribute</th><th>Cardinality</th></tr></thead><tbody><tr><td><details><summary>address[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..*</dd><dt>Type</dt><dd>Address</dd><dt>Inputs</dt><dd><ul><li>XXX-X</li></ul></dd><dt>Logic</dt><dd><ul><li>See main resource specification for actual Min, Max.</li><li>The main resource specification overrides these common specifications.</li><li>See child nodes for mapping.</li><li>Component numbering applies to the input segment and field from the main resource<br>specifications. For example, if the main resource sheet indicated an input of PID-11, then<br>XXX-X.7 in the child nodes would refer to PID-11.7.</li><li>Do not map if <code>use</code> is the only child node mapped.</li><li>See child attributes for additional mapping logic.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].country </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.6</li></ul></dd><dt>Logic</dt><dd><ul><li>Do not map if the field is blank, otherwise set to the contents of the field.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].district </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.9</li></ul></dd><dt>Logic</dt><dd><ul><li>Do not map if the field is blank, otherwise set to the contents of the field.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].line[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..2</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.1.1</li><li>XXX-X.1.2</li><li>XXX-X.2.1</li></ul></dd><dt>Logic</dt><dd><ul><li>Set first <code>address[].line[]</code> as follows:<br>-- Concatenate XXX-X.1.1, a single space, XXX-X.1.2. Trim the resulting string of leading and<br>trailing spaces.<br>-- Set to the resulting trimmed concatenation IFF the resulting trimmed concatenation is not blank.</li><li>Set second <code>address[].line[]</code> as follows:<br>-- Trim XXX-X.2.1 of leading and trailing whitespace.<br>-- Set to the resulting trimmed value IFF the resulting trimmed value is not blank.</li><li>Ignore additional address that may be received from Epic.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].city </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.3</li></ul></dd><dt>Logic</dt><dd><ul><li>Do not map if the field is blank, otherwise set to the contents of the field.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].postalCode </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.5</li></ul></dd><dt>Logic</dt><dd><ul><li>Do not map if the field is blank, otherwise set to the contents of the field.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].state </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.4</li></ul></dd><dt>Logic</dt><dd><ul><li>Do not map if the field is blank, otherwise set to the contents of the field.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>address[].use </summary><div><div><dl><dt>Cardinality</dt><dd>1..1</dd><dt>Type</dt><dd>code</dd><dt>Inputs</dt><dd><ul><li>XXX-X.7</li></ul></dd><dt>Logic</dt><dd><ul><li>See main resource specification.</li></ul></dd></dl></div></div></details></td><td>Required</td></tr><tr><td><details><summary>meta </summary><div><div><dl><dt>Cardinality</dt><dd>1..1</dd><dt>Type</dt><dd>Meta</dd><dt>Logic</dt><dd><ul><li>See child attributes for additional mapping logic.</li></ul></dd></dl></div></div></details></td><td>Required</td></tr><tr><td><details><summary>meta.source </summary><div><div><dl><dt>Cardinality</dt><dd>1..1</dd><dt>Type</dt><dd>uri</dd><dt>Logic</dt><dd><ul><li>Hard coded to constant value.</li></ul></dd><dt>Constant Value</dt><dd><ul><li>"<a href="http://terms.mayo.edu/mccfhir/systemid/mcc/datasource/epic&amp;#34" target="_blank" rel="noopener noreferrer">http://terms.mayo.edu/mccfhir/systemid/mcc/datasource/epic&amp;#34</a>;</li></ul></dd></dl></div></div></details></td><td>Required</td></tr><tr><td><details><summary>name[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..*</dd><dt>Type</dt><dd>HumanName</dd><dt>Inputs</dt><dd><ul><li>XXX-X</li></ul></dd><dt>Logic</dt><dd><ul><li>See main resource specification for actual Min, Max.</li><li>The main resource specification overrides these common specifications.</li><li>See child nodes for mapping.</li><li>Component numbering applies to the input segment and field from the main resource<br>specifications. For example, if the main resource sheet indicated an input of PID-5, then<br>XXX-X.3 in the child nodes would refer to PID-5.3.</li><li>Although both HL7 and FHIR support name as a repeatable entity, we will only ever take the<br>first iteration of name from the HL7 and we will not add name iterations on the FHIR record<br>(even in the case of name changes). We will always only retain the most current name and rely<br>upon provenance and _history records for any previous names.</li><li>Do not map this attribute if only <code>name[].use</code> is set.</li><li>See child attributes for additional mapping logic.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>name[].family </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.1.1</li></ul></dd><dt>Logic</dt><dd><ul><li>Set to value found in XXX-X.1.1, ignoring any other subcomponents (XXX-X.1.2, XXX-X.1.3, etc.).</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>name[].given[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..*</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.2 first name</li><li>XXX-X.3 middle name(s)</li></ul></dd><dt>Logic</dt><dd><ul><li>Set the first item of <code>given[]</code> to the first name in XXX-X.2.</li><li>Set subsequent items of <code>given[]</code> to the middle names found in XXX-X.3 (&amp;-delimited) in order, one name per item.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>name[].prefix[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..*</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.5</li></ul></dd><dt>Logic</dt><dd><ul><li>Set to name prefixes in order from XXX-X.5 (&amp;-delimited).</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>name[].suffix[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..*</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.4 name suffix(es)</li><li>XXX-X.6 degree(s)</li></ul></dd><dt>Logic</dt><dd><ul><li>Set to name suffix(es) in order from XXX-X.4 (&amp;-delimited), followed by degree(s) in order from XXX-X.6 (&amp;-delimited).</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>name[].use </summary><div><div><dl><dt>Cardinality</dt><dd>1..1</dd><dt>Type</dt><dd>code</dd><dt>Logic</dt><dd><ul><li>Hard coded to constant value.</li></ul></dd><dt>Constant Value</dt><dd><ul><li>"usual"</li></ul></dd></dl></div></div></details></td><td>Required</td></tr><tr><td><details><summary>telecom[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..*</dd><dt>Type</dt><dd>ContactPoint</dd><dt>Inputs</dt><dd><ul><li>XXX-X</li></ul></dd><dt>Logic</dt><dd><ul><li>See main resource specification for actual Min, Max.</li><li>The main resource specification overrides these common specifications.</li><li>See child nodes for mapping.</li><li>Component numbering applies to the input segment and field from the main resource<br>specifications. For example, if the main resource sheet indicated an input of PID-13, then<br>XXX-X.3 in the child nodes would refer to PID-13.3.</li><li>See child attributes for additional mapping logic.</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>telecom[].system </summary><div><div><dl><dt>Cardinality</dt><dd>1..1</dd><dt>Type</dt><dd>code</dd><dt>Inputs</dt><dd><ul><li>XXX-X.3</li></ul></dd><dt>Concept Map</dt><dd><code>http://terms.mayo.edu/mccfhir/conceptmap/epic.communication.type.has.fhir.contact.point</code></dd><dt>Logic</dt><dd><ul><li>Set using concept map.</li><li>If the input does not have an entry in the Concept Map, execute the following action: Throw UnexpectedCodeException</li><li>If the input is blank Concept Map, execute the following action: Default to "other"</li></ul></dd></dl></div></div></details></td><td>Required</td></tr><tr><td><details><summary>telecom[].use </summary><div><div><dl><dt>Cardinality</dt><dd>0..1</dd><dt>Type</dt><dd>code</dd><dt>Inputs</dt><dd><ul><li>XXX-X.2, XXX-X.3, YYY-Y.2, YYY-Y.3</li></ul></dd><dt>Concept Map</dt><dd><code>http://terms.mayo.edu/systemid/terms/termsconceptmap/id</code></dd><dt>Logic</dt><dd><ul><li>If XXX-X.2 is "T", set to "temp"</li><li>If XXX-X.2 and XXX-X.3 are empty, or XXX-X.2 is "NET", do not set</li><li>if XXX-X.3 is empty, set to "home"</li><li>if XXX-X.3 is not empty, look value up in concept map and set to result</li><li>If YYY-Y.2 is "T", set to "temp"</li><li>If YYY-Y.2 and YYY-Y.3 are empty, or YYY-Y.2 is "NET", do not set</li><li>if YYY-Y.2 is empty, set to "work"</li><li>if YYY-Y.2 is not empty, look value up in concept map and set to result</li><li>Otherwise, throw UnexpectedCodeException</li><li>If the input does not have an entry in the Concept Map, execute the following action: EXCEPTION</li></ul></dd><dt>Notes</dt><dd><ul><li>XXX-X.X refers to the segment and field containing the "home" telecom system</li><li>YYY-Y.Y refers to the segment and field containing the "work" telecom system</li></ul></dd></dl></div></div></details></td><td>Optional</td></tr><tr><td><details><summary>telecom[].value </summary><div><div><dl><dt>Cardinality</dt><dd>1..1</dd><dt>Type</dt><dd>string</dd><dt>Inputs</dt><dd><ul><li>XXX-X.1</li><li>XXX-X.4</li></ul></dd><dt>Logic</dt><dd><ul><li>Set to XXX-X.4 if <code>telecom[].system</code> = "email", else set to XXX-X.1.</li><li>If value is blank, do not create an element in the telecom array (skip this repetition).</li></ul></dd></dl></div></div></details></td><td>Required</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unsupported-attributes">Unsupported Attributes<a href="#unsupported-attributes" class="hash-link" aria-label="Direct link to Unsupported Attributes" title="Direct link to Unsupported Attributes">​</a></h2>
<table><thead><tr><th>Attribute</th><th>Cardinality</th></tr></thead><tbody><tr><td><details><summary>address[].extension[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>Extension</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>address[].id </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd><a href="http://hl7.org/fhirpath/System.String" target="_blank" rel="noopener noreferrer">http://hl7.org/fhirpath/System.String</a></dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>address[].period </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>Period</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd><dt>Notes</dt><dd><ul><li>We exclude period because we only track the current address.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>address[].text </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>string</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>address[].type </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>code</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd><dt>Notes</dt><dd><ul><li>There is nothing in the HL7 message that indicates what type of address it is.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>name[].id </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd><a href="http://hl7.org/fhirpath/System.String" target="_blank" rel="noopener noreferrer">http://hl7.org/fhirpath/System.String</a></dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>name[].extension[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>Extension</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>name[].period </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>Period</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>name[].text </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>string</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>telecom[].id </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd><a href="http://hl7.org/fhirpath/System.String" target="_blank" rel="noopener noreferrer">http://hl7.org/fhirpath/System.String</a></dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>telecom[].extension[] </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>Extension</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>telecom[].period </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>Period</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr><tr><td><details><summary>telecom[].rank </summary><div><div><dl><dt>Cardinality</dt><dd>0..0</dd><dt>Type</dt><dd>positiveInt</dd><dt>Logic</dt><dd><ul><li>Not mapped.</li></ul></dd></dl></div></div></details></td><td>Not Supported</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known Issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known Issues" title="Direct link to Known Issues">​</a></h2>
<p>None</p></div></article>